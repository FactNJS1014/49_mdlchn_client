import{an as V,d as f,ao as B,r as n,ac as y,n as v,k as M,o as g,I as _,y as d,ap as R,C as t,B as a,x as $,ai as A,aj as L,z as r,A as h,a4 as b,ah as S,aq as I,ab as x,ar as j,as as N,at as P,ag as U,au as z,av as D}from"#entry";const F=V("/blockchain.png"),O={class:"font-semibold text-md"},q=f({__name:"sidebar",setup(w){const i=B(),e=n(i.path);y(()=>i.path,s=>{e.value=s});const u=s=>{e.value=s},p=n([{id:1,icon:"mdi mdi-database-cog",to:"/appMaster",label:"สายอนุมัติ",permissions:[1,2]},{id:2,icon:"mdi mdi-numeric-1-box",to:"/",label:"แบบฟอร์ม Operator",permissions:[1]},{id:3,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"แบบฟอร์ม Technichian",permissions:[2]},{id:4,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"เอกสารอนุมัติ CP Process",permissions:[9]},{id:5,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"เอกสารอนุมัติ RF Process",permissions:[9]}]),{public:c}=v(),l=n(null),m=n(0),k=async()=>{const s=await x.get(`${c.apiBase}/session/user`,{withCredentials:!0});l.value=s.data,m.value=l.value.permission,console.log("user permission:",m.value)},C=M(()=>p.value.filter(s=>s.permissions.includes(m.value)));return g(()=>{k()}),(s,J)=>(d(),_(R,{app:"",permanent:"",color:"blue-lighten-5"},{default:t(()=>[a(I,{density:"comfortable",nav:""},{default:t(()=>[(d(!0),$(S,null,A(C.value,o=>(d(),_(L,{key:o.id,to:o.to,router:"",exact:"",active:e.value===o.to,onClick:K=>u(o.to),color:e.value===o.to?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:t(()=>[a(b,{icon:o.icon},null,8,["icon"])]),title:t(()=>[r("p",O,h(o.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),E=Object.assign(q,{__name:"Sidebar"}),T={class:"flex items-center gap-3"},G={class:"flex items-center gap-2 ml-auto"},H={class:"text-white font-medium"},W=f({__name:"custom",setup(w){const{public:i}=v();console.log(i.apiBase);const e=n(null),u=n(""),p=async()=>{const c=await x.get(`${i.apiBase}/session/user`,{withCredentials:!0});e.value=c.data,console.log("user session:",e.value),u.value=e.value?.username||""};return g(()=>{p()}),(c,l)=>(d(),_(D,null,{default:t(()=>[a(j,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:t(()=>[r("div",T,[a(N,{src:F,alt:"Logo",width:"32",height:"32",contain:""}),l[0]||(l[0]=r("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),r("div",G,[a(b,{icon:"mdi-account-circle",size:"26",color:"white"}),r("span",H,h(u.value),1)])]),_:1}),a(E),a(P,{class:"p-4"},{default:t(()=>[a(U,null,{default:t(()=>[z(c.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{W as default};
