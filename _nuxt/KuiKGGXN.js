import{an as V,d as v,ao as B,r as n,ac as A,n as b,k as M,o as g,I as f,y as m,ap as N,C as i,B as o,x as R,ai as $,aj as L,z as d,A as h,a4 as x,ah as S,aq as I,ab as w,ar as j,as as P,at as U,ag as z,au as D,av as F}from"#entry";const O=V("/blockchain.png"),q={class:"font-semibold text-md"},E=v({__name:"sidebar",setup(k){const l=B(),s=n(l.path);A(()=>l.path,a=>{s.value=a});const p=a=>{s.value=a},_=n([{id:1,icon:"mdi mdi-database-cog",to:"/appMaster",label:"สายอนุมัติ",permissions:[9,8]},{id:2,icon:"mdi mdi-numeric-1-box",to:"/",label:"แบบฟอร์ม Operator",permissions:[1,2,3,8,9]},{id:3,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"แบบฟอร์ม Technichian",permissions:[2,3,4,8,9]},{id:4,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"เอกสารอนุมัติ CP Process",permissions:[8,9]},{id:5,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"เอกสารอนุมัติ RF Process",permissions:[8,9]}]),{public:c}=b(),r=n(null),u=n(0),y=async()=>{const a=await w.get(`${c.apiBase}/session/user`,{withCredentials:!0});r.value=a.data;const t=r.value.permission;typeof t=="string"?u.value=t.split(",").map(e=>Number(e.trim())):Array.isArray(t)?u.value=t.map(e=>Number(e)):u.value=[Number(t)],console.log("user permission:",u.value)},C=M(()=>_.value.filter(a=>a.permissions.some(t=>u.value.includes(t))));return g(()=>{y()}),(a,t)=>(m(),f(N,{app:"",permanent:"",color:"blue-lighten-5"},{default:i(()=>[o(I,{density:"comfortable",nav:""},{default:i(()=>[(m(!0),R(S,null,$(C.value,e=>(m(),f(L,{key:e.id,to:e.to,router:"",exact:"",active:s.value===e.to,onClick:K=>p(e.to),color:s.value===e.to?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:i(()=>[o(x,{icon:e.icon},null,8,["icon"])]),title:i(()=>[d("p",q,h(e.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),T=Object.assign(E,{__name:"Sidebar"}),G={class:"flex items-center gap-3"},H={class:"flex items-center gap-2 ml-auto"},J={class:"text-white font-medium"},W=v({__name:"custom",setup(k){const{public:l}=b();console.log(l.apiBase);const s=n(null),p=n(""),_=async()=>{const c=await w.get(`${l.apiBase}/session/user`,{withCredentials:!0});s.value=c.data,console.log("user session:",s.value),p.value=s.value?.username||""};return g(()=>{_()}),(c,r)=>(m(),f(F,null,{default:i(()=>[o(j,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:i(()=>[d("div",G,[o(P,{src:O,alt:"Logo",width:"32",height:"32",contain:""}),r[0]||(r[0]=d("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),d("div",H,[o(x,{icon:"mdi-account-circle",size:"26",color:"white"}),d("span",J,h(p.value),1)])]),_:1}),o(T),o(U,{class:"p-4"},{default:i(()=>[o(z,null,{default:i(()=>[D(c.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{W as default};
