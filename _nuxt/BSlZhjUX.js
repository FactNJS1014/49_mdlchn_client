import{an as V,d as v,ao as B,r as c,ac as A,n as b,o as h,k as M,I as f,y as m,ap as R,C as t,B as o,x as L,ai as S,aj as I,z as d,A as x,a4 as $,ah as j,aq as N,ab as w,ar as P,as as U,at as z,ag as D,au as E,av as F}from"#entry";const O=V("/blockchain.png"),q={class:"font-semibold text-md"},T=v({__name:"sidebar",setup(k){const u=B(),a=c(u.path);A(()=>u.path,e=>{a.value=e});const p=e=>{a.value=e},g=c([{id:1,icon:"mdi mdi-database-cog",to:"/appMaster",label:"à¸ªà¸²à¸¢à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",permission:[7,8,9]},{id:2,icon:"mdi mdi-numeric-1-box",to:"/",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Operator",permission:[1,3,7]},{id:3,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Technichian",permission:[2,4,7]},{id:4,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ CP Process",permission:[7,8,9]},{id:5,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ RF Process",permission:[7,8,9]}]),{public:n}=b();console.log(n.apiBase);const i=c(null),l=c(0),y=async()=>{try{const e=await w.get(`${n.apiBase}/session/user`,{withCredentials:!0});i.value=e.data,console.log("user session:",i.value),l.value=i.value?.permission||0,console.log("user permission:",l.value)}catch(e){console.error("Error fetching user session:",e)}};h(()=>{y()});const C=M(()=>g.value.filter(e=>{if(Array.isArray(e.permission)){console.log("ðŸ§© à¹€à¸¡à¸™à¸¹:",e.label,"| à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£:",e.permission);const r=e.permission.some(s=>{const _=l.value>=s;return console.log(`ðŸ”¹ à¸•à¸£à¸§à¸ˆà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸¡à¸™à¸¹ "${e.label}": à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ >= ${s}, à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ = ${l.value} â†’ ${_}`),_});return console.log(`âž¡ï¸ à¸ªà¸£à¸¸à¸›à¹€à¸¡à¸™à¸¹ "${e.label}" à¹à¸ªà¸”à¸‡à¸œà¸¥:`,r),r}else{const r=l.value>=e.permission;return console.log(`ðŸ”¹ à¹€à¸¡à¸™à¸¹ "${e.label}" à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ >= ${e.permission}, à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ = ${l.value} â†’ ${r}`),r}}));return(e,r)=>(m(),f(R,{app:"",permanent:"",color:"blue-lighten-5"},{default:t(()=>[o(N,{density:"comfortable",nav:""},{default:t(()=>[(m(!0),L(j,null,S(C.value,s=>(m(),f(I,{key:s.id,to:s.to,router:"",exact:"",active:a.value===s.to,onClick:_=>p(s.to),color:a.value===s.to?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:t(()=>[o($,{icon:s.icon},null,8,["icon"])]),title:t(()=>[d("p",q,x(s.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),G=Object.assign(T,{__name:"Sidebar"}),H={class:"flex items-center gap-3"},J={class:"flex items-center gap-2 ml-auto"},K={class:"text-white font-medium"},W=v({__name:"custom",setup(k){const{public:u}=b();console.log(u.apiBase);const a=c(null),p=c(""),g=async()=>{const n=await w.get(`${u.apiBase}/session/user`,{withCredentials:!0});a.value=n.data,console.log("user session:",a.value),p.value=a.value?.username||""};return h(()=>{g()}),(n,i)=>(m(),f(F,null,{default:t(()=>[o(P,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:t(()=>[d("div",H,[o(U,{src:O,alt:"Logo",width:"32",height:"32",contain:""}),i[0]||(i[0]=d("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),d("div",J,[o($,{icon:"mdi-account-circle",size:"26",color:"white"}),d("span",K,x(p.value),1)])]),_:1}),o(G),o(z,{class:"p-4"},{default:t(()=>[o(D,null,{default:t(()=>[E(n.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{W as default};
