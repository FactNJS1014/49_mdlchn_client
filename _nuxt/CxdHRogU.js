import{an as R,d as f,ao as B,ap as $,r,ac as M,n as g,k as P,o as x,I as v,y as m,aq as L,C as t,B as o,x as S,ai as I,aj as N,z as d,A,a4 as w,ah as U,ar as j,ab as y,as as F,at as z,au as D,ag as E,av as O,aw as q}from"#entry";const T=R("/blockchain.png"),G={class:"font-semibold text-md"},H=f({__name:"sidebar",setup(k){const c=B(),l=$(),i=r(c.path);M(()=>c.path,e=>{i.value=e});const h=e=>{i.value=e},n=r([{id:1,icon:"mdi mdi-database-cog",to:"/appMaster",label:"à¸ªà¸²à¸¢à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",permission:[2,7,8,9]},{id:2,icon:"mdi mdi-numeric-1-box",to:"/",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Operator",permission:[1,3,7]},{id:3,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Technichian",permission:[2,4,7]},{id:4,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ CP Process",permission:[7,8,9]},{id:5,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ RF Process",permission:[7,8,9]},{id:6,icon:"mdi mdi-chart-areaspline",to:"/report",label:"Report Process CP",permission:[7,8,9]},{id:7,icon:"mdi mdi-chart-areaspline",to:"/report2",label:"Report Process RF",permission:[7,8,9]}]),{public:p}=g(),_=r(null),a=r(0),C=async()=>{try{const e=await y.get(`${p.apiBase}/session/user`,{withCredentials:!0});_.value=e.data,a.value=Number(_.value?.permission||0),console.log("ðŸ‘¤ User permission:",a.value)}catch(e){console.error("âŒ Error fetching user session:",e)}};P(()=>n.value.filter(e=>{if(Array.isArray(e.permission)){const u=e.permission.some(s=>a.value===s);return console.log(`âž¡ï¸ ${e.label} visible:`,u),u}else return a.value===e.permission}));const b=e=>(Array.isArray(e.permission)?e.permission.includes(a.value):a.value===e.permission)&&i.value===e.to,V=e=>{if(!(Array.isArray(e.permission)?e.permission.includes(a.value):a.value===e.permission)){console.warn(`ðŸš« à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹€à¸¡à¸™à¸¹: ${e.label}`);return}h(e.to),l.push(e.to)};return x(()=>{C()}),(e,u)=>(m(),v(L,{app:"",permanent:"",color:"blue-lighten-5"},{default:t(()=>[o(j,{density:"comfortable",nav:""},{default:t(()=>[(m(!0),S(U,null,I(n.value,s=>(m(),v(N,{key:s.id,to:s.to,router:"",exact:"",active:b(s),onClick:X=>V(s),color:b(s)?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:t(()=>[o(w,{icon:s.icon},null,8,["icon"])]),title:t(()=>[d("p",G,A(s.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),J=Object.assign(H,{__name:"Sidebar"}),K={class:"flex items-center gap-3"},Q={class:"flex items-center gap-2 ml-auto"},W={class:"text-white font-medium"},Z=f({__name:"custom",setup(k){const{public:c}=g();console.log(c.apiBase);const l=r(null),i=r(""),h=async()=>{const n=await y.get(`${c.apiBase}/session/user`,{withCredentials:!0});l.value=n.data,console.log("user session:",l.value),i.value=l.value?.username||""};return x(()=>{h()}),(n,p)=>(m(),v(q,null,{default:t(()=>[o(F,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:t(()=>[d("div",K,[o(z,{src:T,alt:"Logo",width:"32",height:"32",contain:""}),p[0]||(p[0]=d("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),d("div",Q,[o(w,{icon:"mdi-account-circle",size:"26",color:"white"}),d("span",W,A(i.value),1)])]),_:1}),o(J),o(D,{class:"p-4"},{default:t(()=>[o(E,null,{default:t(()=>[O(n.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{Z as default};
