import{av as B,d as b,aw as $,ax as P,r as u,ac as M,n as x,k as S,o as w,I as g,y as m,ay as I,C as t,B as o,x as L,ai as U,aj as j,z as p,A,a5 as y,ah as z,az as D,ab as C,aA as E,aB as F,aC as N,ag as O,aD as T,aE as q}from"#entry";const G=B("/blockchain.png"),H={class:"font-semibold text-md"},J=b({__name:"sidebar",setup(k){const n=$(),r=P(),a=u(n.path);M(()=>n.path,e=>{a.value=e});const h=e=>{a.value=e},c=u([{id:1,icon:"mdi mdi-numeric-1-box",to:"/",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Operator",permission:[1,3,7]},{id:2,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Technichian",permission:[2,4,7]},{id:3,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ CP Process",permission:[2,7,9]},{id:4,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ RF Process",permission:[2,7,9]},{id:5,icon:"mdi mdi-chart-box",to:"/report",label:"Report CP Process",permission:[7,8,9]},{id:6,icon:"mdi mdi-chart-box",to:"/report2",label:"Report RF Process",permission:[7,8,9]},{id:7,icon:"mdi mdi-cog-box",to:"/settingsMaster",label:"Settings",permission:[5,7]},{id:8,icon:"mdi mdi-database-cog",to:"/appMaster",label:"à¸ªà¸²à¸¢à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",permission:[7,9]}]),{public:f}=x(),_=u(null),l=u(0),R=async()=>{try{const e=await C.get("http://172.22.64.11/49_modelchange/49_mdlchn_api/session/user",{withCredentials:!0});_.value=e.data,l.value=_.value?.permission||0,console.log("ðŸ‘¤ User session:",_.value),console.log("ðŸ”‘ Permission:",l.value),V()}catch(e){console.error("âŒ Error fetching user session:",e)}},v=S(()=>c.value.filter(e=>{if(Array.isArray(e.permission)){const i=e.permission.some(s=>l.value==s);return console.log(`ðŸ“‹ à¹€à¸¡à¸™à¸¹ "${e.label}" | à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ = ${l.value} | à¹à¸ªà¸”à¸‡à¸œà¸¥: ${i}`),i}else return l.value==e.permission})),V=()=>{const e=n.path,i=c.value.find(s=>s.to===e);if(i&&Array.isArray(i.permission)&&!i.permission.some(d=>l.value==d)){console.warn(`ðŸš« à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸‚à¹‰à¸²à¸«à¸™à¹‰à¸² ${e}`);const d=v.value[0];d?r.push(d.to):r.push("/")}};return w(()=>{R()}),(e,i)=>(m(),g(I,{app:"",permanent:"",color:"blue-lighten-5"},{default:t(()=>[o(D,{density:"comfortable",nav:""},{default:t(()=>[(m(!0),L(z,null,U(v.value,s=>(m(),g(j,{key:s.id,to:s.to,router:"",exact:"",active:a.value===s.to,onClick:d=>h(s.to),color:a.value===s.to?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:t(()=>[o(y,{icon:s.icon},null,8,["icon"])]),title:t(()=>[p("p",H,A(s.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),K=Object.assign(J,{__name:"Sidebar"}),Q={class:"flex items-center gap-3"},W={class:"flex items-center gap-2 ml-auto"},X={class:"text-white font-medium"},Z=b({__name:"custom",setup(k){const{public:n}=x();console.log(n.apiBase);const r=u(null),a=u(""),h=async()=>{const c=await C.get(`${n.apiBase}/session/user`,{withCredentials:!0});r.value=c.data,console.log("user session:",r.value),a.value=r.value?.username||""};return w(()=>{h()}),(c,f)=>(m(),g(q,null,{default:t(()=>[o(E,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:t(()=>[p("div",Q,[o(F,{src:G,alt:"Logo",width:"32",height:"32",contain:""}),f[0]||(f[0]=p("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),p("div",W,[o(y,{icon:"mdi-account-circle",size:"26",color:"white"}),p("span",X,A(a.value),1)])]),_:1}),o(K),o(N,{class:"p-4"},{default:t(()=>[o(O,null,{default:t(()=>[T(c.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{Z as default};
