import{an as B,d as h,ao as y,r as l,ac as g,n as v,o as b,k as M,I as _,y as d,ap as R,C as t,B as a,x as $,ai as A,aj as L,z as r,A as x,a4 as w,ah as S,aq as I,ab as k,ar as U,as as j,at as F,ag as N,au as P,av as z}from"#entry";const D=B("/blockchain.png"),E={class:"font-semibold text-md"},O=h({__name:"sidebar",setup(C){const c=y(),s=l(c.path);g(()=>c.path,e=>{s.value=e});const u=e=>{s.value=e},p=l([{id:1,icon:"mdi mdi-database-cog",to:"/appMaster",label:"สายอนุมัติ",permission:9},{id:2,icon:"mdi mdi-numeric-1-box",to:"/",label:"แบบฟอร์ม Operator",permission:1},{id:3,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"แบบฟอร์ม Technichian",permission:2},{id:4,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"อนุมัติ CP Process",permission:9},{id:5,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"อนุมัติ RF Process",permission:9}]),{public:n}=v();console.log(n.apiBase);const i=l(null),m=l(0),V=async()=>{try{const e=await k.get(`${n.apiBase}/session/user`,{withCredentials:!0});i.value=e.data,console.log("user session:",i.value),m.value=i.value?.permission||0,console.log("user permission:",m.value)}catch(e){console.error("Error fetching user session:",e)}};b(()=>{V()});const f=M(()=>p.value.filter(e=>m.value<=e.permission));return g(f,e=>{console.log("Filtered Menu Updated:",e)},{immediate:!0}),(e,J)=>(d(),_(R,{app:"",permanent:"",color:"blue-lighten-5"},{default:t(()=>[a(I,{density:"comfortable",nav:""},{default:t(()=>[(d(!0),$(S,null,A(f.value,o=>(d(),_(L,{key:o.id,to:o.to,router:"",exact:"",active:s.value===o.to,onClick:K=>u(o.to),color:s.value===o.to?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:t(()=>[a(w,{icon:o.icon},null,8,["icon"])]),title:t(()=>[r("p",E,x(o.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),q=Object.assign(O,{__name:"Sidebar"}),T={class:"flex items-center gap-3"},G={class:"flex items-center gap-2 ml-auto"},H={class:"text-white font-medium"},W=h({__name:"custom",setup(C){const{public:c}=v();console.log(c.apiBase);const s=l(null),u=l(""),p=async()=>{const n=await k.get(`${c.apiBase}/session/user`,{withCredentials:!0});s.value=n.data,console.log("user session:",s.value),u.value=s.value?.username||""};return b(()=>{p()}),(n,i)=>(d(),_(z,null,{default:t(()=>[a(U,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:t(()=>[r("div",T,[a(j,{src:D,alt:"Logo",width:"32",height:"32",contain:""}),i[0]||(i[0]=r("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),r("div",G,[a(w,{icon:"mdi-account-circle",size:"26",color:"white"}),r("span",H,x(u.value),1)])]),_:1}),a(q),a(F,{class:"p-4"},{default:t(()=>[a(N,null,{default:t(()=>[P(n.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{W as default};
