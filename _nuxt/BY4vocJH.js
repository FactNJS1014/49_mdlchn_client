import{an as P,d as f,ao as V,r,ac as y,n as v,k as B,o as g,I as _,y as p,ap as q,C as t,B as a,x as A,ai as M,aj as R,z as c,A as h,a4 as b,ah as $,aq as L,ab as x,ar as S,as as I,at as j,ag as N,au as U,av as z}from"#entry";const D=P("/blockchain.png"),F={class:"font-semibold text-md"},O=f({__name:"sidebar",setup(w){const l=V(),s=r(l.path);y(()=>l.path,e=>{s.value=e});const u=e=>{s.value=e},m=r([{id:1,icon:"mdi mdi-database-cog",to:"/appMaster",label:"สายอนุมัติ",requiredPermission:1},{id:2,icon:"mdi mdi-numeric-1-box",to:"/",label:"แบบฟอร์ม Operator",requiredPermission:1},{id:3,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"แบบฟอร์ม Technichian",requiredPermission:1},{id:4,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"เอกสารอนุมัติ CP Process",requiredPermission:9},{id:5,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"เอกสารอนุมัติ RF Process",requiredPermission:9}]),{public:i}=v();console.log(i.apiBase);const n=r(null),d=r(0),k=async()=>{const e=await x.get(`${i.apiBase}/session/user`,{withCredentials:!0});n.value=e.data,console.log("user session:",n.value),d.value=n.value.permission,console.log("user permission:",d.value)},C=B(()=>m.value.filter(e=>Array.isArray(e.requiredPermission)?e.requiredPermission.includes(d.value):d.value===e.requiredPermission));return g(()=>{k()}),(e,J)=>(p(),_(q,{app:"",permanent:"",color:"blue-lighten-5"},{default:t(()=>[a(L,{density:"comfortable",nav:""},{default:t(()=>[(p(!0),A($,null,M(C.value,o=>(p(),_(R,{key:o.id,to:o.to,router:"",exact:"",active:s.value===o.to,onClick:K=>u(o.to),color:s.value===o.to?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:t(()=>[a(b,{icon:o.icon},null,8,["icon"])]),title:t(()=>[c("p",F,h(o.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),E=Object.assign(O,{__name:"Sidebar"}),T={class:"flex items-center gap-3"},G={class:"flex items-center gap-2 ml-auto"},H={class:"text-white font-medium"},W=f({__name:"custom",setup(w){const{public:l}=v();console.log(l.apiBase);const s=r(null),u=r(""),m=async()=>{const i=await x.get(`${l.apiBase}/session/user`,{withCredentials:!0});s.value=i.data,console.log("user session:",s.value),u.value=s.value?.username||""};return g(()=>{m()}),(i,n)=>(p(),_(z,null,{default:t(()=>[a(S,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:t(()=>[c("div",T,[a(I,{src:D,alt:"Logo",width:"32",height:"32",contain:""}),n[0]||(n[0]=c("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),c("div",G,[a(b,{icon:"mdi-account-circle",size:"26",color:"white"}),c("span",H,h(u.value),1)])]),_:1}),a(E),a(j,{class:"p-4"},{default:t(()=>[a(N,null,{default:t(()=>[U(i.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{W as default};
