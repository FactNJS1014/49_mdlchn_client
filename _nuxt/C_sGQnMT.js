import{an as B,d as h,ao as A,r as l,ac as v,n as b,o as x,k as M,I as _,y as p,ap as R,C as t,B as a,x as $,ai as L,aj as S,z as c,A as w,a4 as k,ah as I,aq as U,ab as y,ar as j,as as F,at as N,ag as P,au as z,av as D}from"#entry";const E=B("/blockchain.png"),O={class:"font-semibold text-md"},q=h({__name:"sidebar",setup(C){const r=A(),s=l(r.path);v(()=>r.path,e=>{s.value=e});const u=e=>{s.value=e},m=l([{id:1,icon:"mdi mdi-database-cog",to:"/appMaster",label:"à¸ªà¸²à¸¢à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",permission:[7,8,9]},{id:2,icon:"mdi mdi-numeric-1-box",to:"/",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Operator",permission:[1,3,7]},{id:3,icon:"mdi mdi-numeric-2-box",to:"/tech_record",label:"à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡ Technichian",permission:[2,4,7]},{id:4,icon:"mdi mdi-file-document-check",to:"/dataApp",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ CP Process",permission:[7,8,9]},{id:5,icon:"mdi mdi-file-document-check",to:"/dataRf",label:"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ RF Process",permission:[7,8,9]}]),{public:n}=b();console.log(n.apiBase);const i=l(null),d=l(0),V=async()=>{try{const e=await y.get(`${n.apiBase}/session/user`,{withCredentials:!0});i.value=e.data,console.log("user session:",i.value),d.value=i.value?.permission||0,console.log("user permission:",d.value)}catch(e){console.error("Error fetching user session:",e)}};x(()=>{V()});const f=M(()=>m.value.filter(e=>Array.isArray(e.permission)?e.permission.some(g=>d.value>=g):d.value>=e.permission));return v(f,e=>{console.log("ðŸŽ¯ Filtered Menu Updated:",e)}),(e,g)=>(p(),_(R,{app:"",permanent:"",color:"blue-lighten-5"},{default:t(()=>[a(U,{density:"comfortable",nav:""},{default:t(()=>[(p(!0),$(I,null,L(f.value,o=>(p(),_(S,{key:o.id,to:o.to,router:"",exact:"",active:s.value===o.to,onClick:K=>u(o.to),color:s.value===o.to?"light-blue-darken-4":void 0,variant:"tonal"},{prepend:t(()=>[a(k,{icon:o.icon},null,8,["icon"])]),title:t(()=>[c("p",O,w(o.label),1)]),_:2},1032,["to","active","onClick","color"]))),128))]),_:1})]),_:1}))}}),T=Object.assign(q,{__name:"Sidebar"}),G={class:"flex items-center gap-3"},H={class:"flex items-center gap-2 ml-auto"},J={class:"text-white font-medium"},W=h({__name:"custom",setup(C){const{public:r}=b();console.log(r.apiBase);const s=l(null),u=l(""),m=async()=>{const n=await y.get(`${r.apiBase}/session/user`,{withCredentials:!0});s.value=n.data,console.log("user session:",s.value),u.value=s.value?.username||""};return x(()=>{m()}),(n,i)=>(p(),_(D,null,{default:t(()=>[a(j,{app:"",color:"blue",class:"px-4 flex justify-between items-center"},{default:t(()=>[c("div",G,[a(F,{src:E,alt:"Logo",width:"32",height:"32",contain:""}),i[0]||(i[0]=c("span",{class:"font-bold text-white text-xl tracking-wide"}," Model Change Record System ",-1))]),c("div",H,[a(k,{icon:"mdi-account-circle",size:"26",color:"white"}),c("span",J,w(u.value),1)])]),_:1}),a(T),a(N,{class:"p-4"},{default:t(()=>[a(P,null,{default:t(()=>[z(n.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{W as default};
